<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Le Couloir</title>
<style>
  html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    font-family:"Inter",sans-serif;
    background:#000;
    overflow:hidden;
    color:#fff;
  }

  /* -------- BACKGROUND COULOIR -------- */
  body::before{
    content:"";
    position:fixed;
    inset:0;
    background:url('https://images.unsplash.com/photo-1581091215367-59ab6b4b1c7e?auto=format&fit=crop&w=1600&q=80') center center / cover no-repeat;
    filter:brightness(0.8) saturate(1.1) blur(1px);
    transform:scale(1.02);
  }

  /* Overlays */
  body::after{
    content:"";
    position:fixed;
    inset:0;
    background:radial-gradient(circle at center, rgba(255,255,180,0.1) 0%, rgba(0,0,0,0.8) 90%);
    mix-blend-mode:multiply;
    pointer-events:none;
  }

  /* -------- CONTAINER -------- */
  .container{
    position:relative;
    z-index:2;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
    text-align:center;
    padding:20px;
  }

  h1{
    font-size:2.4rem;
    color:#fffbe0;
    text-shadow:0 0 20px rgba(255,255,180,0.7);
    margin-bottom:20px;
    letter-spacing:1px;
  }

  /* -------- NEONS -------- */
  .neon-strip{
    width:80%;
    max-width:900px;
    height:80px;
    display:flex;
    justify-content:space-evenly;
    align-items:center;
    margin-bottom:40px;
  }

  .bulb{
    width:50px;
    height:50px;
    border-radius:12px;
    background:#444;
    box-shadow:inset 0 -6px 10px rgba(0,0,0,0.4);
    transition:all 0.15s ease;
  }

  .bulb.on{
    background:#fffde6;
    box-shadow:0 0 30px 10px rgba(255,255,200,0.8);
  }

  /* -------- QUESTION -------- */
  .question{
    font-size:1.5rem;
    color:#fff;
    margin-bottom:12px;
    text-shadow:0 0 10px rgba(255,255,150,0.6);
  }

  input[type="number"]{
    padding:10px 14px;
    font-size:1.2rem;
    border-radius:8px;
    border:none;
    outline:none;
    background:rgba(255,255,230,0.2);
    color:#fff;
    width:140px;
    text-align:center;
    margin-bottom:16px;
  }

  button{
    padding:10px 18px;
    border:none;
    border-radius:8px;
    background:linear-gradient(180deg,#f2d100,#b38b00);
    color:#111;
    font-weight:700;
    font-size:1rem;
    cursor:pointer;
    transition:transform 0.1s ease, box-shadow 0.2s ease;
  }
  button:hover{transform:translateY(-3px);box-shadow:0 0 10px rgba(255,230,100,0.8);}
  #replayBtn{background:rgba(255,255,255,0.1);color:#fff;border:1px solid rgba(255,255,255,0.3);margin-left:8px;}
  #replayBtn:hover{background:rgba(255,255,255,0.2);}

  .status{
    margin-top:20px;
    font-size:1.2rem;
    text-shadow:0 0 10px rgba(255,255,100,0.8);
  }

  a#menuLink{
    display:none;
    margin-top:20px;
    text-decoration:none;
    background:linear-gradient(180deg,#fff480,#bdaa00);
    padding:10px 18px;
    border-radius:8px;
    font-weight:bold;
    color:#111;
    box-shadow:0 0 12px rgba(255,255,160,0.5);
  }

  @media (max-width:700px){
    h1{font-size:1.6rem;}
    .bulb{width:36px;height:36px;}
  }
</style>
</head>
<body>
<div class="container">
  <h1>Backrooms — Énigme du Couloir</h1>
  <div class="neon-strip" id="neon">
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
    <div class="bulb"></div>
  </div>

  <div class="question">Combien de fois la lumière va clignoter ensuite ?</div>
  <input id="answer" type="number" placeholder="?" />
  <div>
    <button id="checkBtn">Valider</button>
    <button id="replayBtn">Rejouer</button>
  </div>

  <div id="status" class="status"></div>
  <a href="Suite.html" id="menuLink">Retour au menu</a>
</div>

<script>
const bulbs = document.querySelectorAll('.bulb');
const status = document.getElementById('status');
const answer = document.getElementById('answer');
const checkBtn = document.getElementById('checkBtn');
const replayBtn = document.getElementById('replayBtn');
const menuLink = document.getElementById('menuLink');

const fibSeq = [1,1,2,3,5]; // shown pattern
const nextValue = 8;

let playing = false;

function wait(ms){return new Promise(r=>setTimeout(r,ms));}

async function flash(count){
  for(let i=0;i<count;i++){
    bulbs.forEach(b=>b.classList.add('on'));
    await wait(250);
    bulbs.forEach(b=>b.classList.remove('on'));
    await wait(150);
  }
}

async function play(){
  if(playing) return;
  playing = true;
  status.textContent = "Observe attentivement les clignotements...";
  for(const n of fibSeq){
    await flash(n);
    await wait(600);
  }
  status.textContent = "À toi de jouer.";
  playing = false;
}

function validate(){
  const val = parseInt(answer.value);
  if(isNaN(val)){status.textContent="Entre un nombre.";return;}
  if(val === nextValue){
    status.textContent="✔️ Correct ! La lumière clignotera 8 fois. Le code est -3-.";
    menuLink.style.display="inline-block";
    celebrate();
  } else {
    status.textContent="❌ Mauvaise réponse. Réessaye.";
    negativeBlink();
  }
}

async function celebrate(){
  for(let r=0;r<3;r++){
    bulbs.forEach((b,i)=>setTimeout(()=>b.classList.add('on'),i*30+r*200));
    await wait(300);
    bulbs.forEach(b=>b.classList.remove('on'));
    await wait(100);
  }
}

async function negativeBlink(){
  bulbs.forEach(b=>b.classList.add('on'));
  await wait(120);
  bulbs.forEach(b=>b.classList.remove('on'));
}

checkBtn.onclick = validate;
answer.addEventListener("keydown",e=>{if(e.key==="Enter")validate();});
replayBtn.onclick = play;

// auto play once
window.onload = ()=>setTimeout(play,800);
</script>
</body>
</html>
